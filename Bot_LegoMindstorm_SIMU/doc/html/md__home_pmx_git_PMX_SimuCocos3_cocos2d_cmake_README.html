<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TEST: CMake Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TEST
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">CMake Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>CMake is an open-source, cross-platform family of tools designed to build, test and package software. CMake is used to control the software compilation process using simple platform and compiler independent configuration files, and generates native makefiles and workspaces that can be used in the compiler environment of your choice.</p>
<h2>Requirement</h2>
<ol type="1">
<li>Open your terminal and execute: <div class="fragment"><div class="line">cmake --version</div></div><!-- fragment --> if the CMake version is lower than 3.6, please upgrade.</li>
<li>You should use <b>out-of-source</b> builds, this means you need to create a different directory than <b>cocos2d-x</b> to execute the <code>cmake</code> command.</li>
</ol>
<h2>Step by Step</h2>
<h3>Linux</h3>
<div class="fragment"><div class="line">cd cocos2d-x</div><div class="line">mkdir linux-build &amp;&amp; cd linux-build</div><div class="line">cmake ..</div><div class="line">make</div></div><!-- fragment --><p>Execute <code>make help</code> to see all build targets, <code>make &lt;target&gt;</code> build specified target</p>
<h3>Generate Visual Studio projects</h3>
<div class="fragment"><div class="line">cd cocos2d-x</div><div class="line">mkdir win32-build &amp;&amp; cd win32-build</div><div class="line">cmake .. -G&quot;Visual Studio 15 2017&quot; -Tv141</div></div><!-- fragment --><p>Execute <code>cmake --build .</code> to compile, </p><div class="fragment"><div class="line">cmake --build . --config Debug</div><div class="line">cmake --build . --config Release</div></div><!-- fragment --><p> or open <b>Cocos2d-x.sln</b> in Explorer to use the generated project.</p>
<p>If can't found <code>MSVCR110.dll</code> issue occurs to you, please install this <a href="https://www.microsoft.com/en-us/download/details.aspx?id=30679">Visual C++ Runtime Libraries</a>, when runing the cpp-tests project</p>
<h3>Generate macOS Project</h3>
<div class="fragment"><div class="line">cd cocos2d-x</div><div class="line">mkdir mac-build &amp;&amp; cd mac-build</div><div class="line">cmake .. -GXcode</div><div class="line">open Cocos2d-x.xcodeproj</div></div><!-- fragment --><h3>Generate iOS Project</h3>
<div class="fragment"><div class="line">cd cocos2d-x</div><div class="line">mkdir ios-build &amp;&amp; cd ios-build</div><div class="line">cmake .. -GXcode -DCMAKE_TOOLCHAIN_FILE=../cmake/ios.toolchain.cmake</div><div class="line">open Cocos2d-x.xcodeproj</div></div><!-- fragment --><p>The default build is for running on iOS device, if you want to run in the simulator, please add <code>-DIOS_PLATFORM=SIMULATOR</code> for architecture i386 or <code>-DIOS_PLATFORM=SIMULATOR64</code> for x86_64, but remember you can't run metal-support app in simulator because Apple limitation.</p>
<p>if you want to sign iOS app in CMake, you will need to fill development team ID into <code>set_xcode_property(${APP_NAME} DEVELOPMENT_TEAM "")</code>, or select to sign in Xcode after project files generated.</p>
<h3>Android Studio</h3>
<p>We use the Gradle for Android applications, and Gradle use cmake to build the native code, see <a href="https://github.com/cocos2d/cocos2d-x/blob/84be684e3858393a6f3efc50e3f95d4e0ac92a20/tests/cpp-empty-test/proj.android/gradle.properties#L38">gradle.properties</a>: <code>PROP_NDK_MODE</code>, it controls how native builds work.</p>
<div class="fragment"><div class="line"># android native code build type</div><div class="line"># none, native code will never be compiled.</div><div class="line"># cmake, native code will be compiled by CMakeLists.txt</div><div class="line"># ndk-build, native code will be compiled by Android.mk</div><div class="line">PROP_BUILD_TYPE=cmake</div></div><!-- fragment --><p>If you want to add cmake build arguments, please add it at <a href="https://github.com/cocos2d/cocos2d-x/blob/84be684e3858393a6f3efc50e3f95d4e0ac92a20/tests/cpp-empty-test/proj.android/app/build.gradle#L25">external Native Build</a> block of <b>app/build.gradle</b> file.</p>
<h2>Build Options</h2>
<h3>CMake Common Build Options</h3>
<ol type="1">
<li>__<code>-G</code>__, generate native build project you specified, for example<ul>
<li><code>-GXcode</code> generate Xcode project files.</li>
<li><code>-GVisual Studio 15 2017</code> generate Visual Studio 2017 project, the default toolset is v141, add <code>-T</code> option to specify toolset, like this <code>-Tv140</code></li>
</ul>
</li>
</ol>
<ol type="1">
<li>__<code>CMAKE_BUILD_TYPE</code>__, specify the build mode, Debug or Release<ul>
<li><code>-DCMAKE_BUILD_TYPE=Release</code> to generate the Release mode project, the default build mode is Debug</li>
</ul>
</li>
</ol>
<ol type="1">
<li>__<code>-H -B</code>__, <code>-H</code> specify the CMake project Home directory, <code>-B</code> specify CMake-generated project binary directory. for example<ul>
<li><code>-H..\cocos2d-x -Bmsvc_build</code> the generated native project's location will be <code>msvc_build</code> directory.</li>
</ul>
</li>
</ol>
<ol type="1">
<li>__<code>--build &lt;dir&gt;</code>__, build a CMake-generated project binary tree, for example<ul>
<li><code>cmake --build ./msvc_build</code>, cmake will sellect corresponding build tools.</li>
</ul>
</li>
</ol>
<h2>Tips</h2>
<ol type="1">
<li>Use <code>cmake ..</code> to refersh resources and code files, after you modify <code>Resources</code> or <code>CMakeLists.txt</code>.</li>
</ol>
<ol type="1">
<li>Don't need <code>CMAKE_BUILD_TYPE</code> options when <code>-G</code> Xcode or Visual Studio, CMake scripts will generate both configurations, so you can switch <code>Debug</code> and <code>Release</code> in IDE.</li>
</ol>
<h2>Useful Links</h2>
<ul>
<li>CMake Official website: <a href="https://cmake.org/">cmake.org</a></li>
<li>CMake Documentation: <a href="https://cmake.org/documentation/">cmake.org/documentation</a></li>
<li>CMake FAQ: <a href="https://cmake.org/Wiki/CMake_FAQ">Wiki/CMake_FAQ</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
